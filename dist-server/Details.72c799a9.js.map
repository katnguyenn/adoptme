{"version":3,"sources":["../src/Components/Carousel.js","../src/Components/ErrorBoundary.js","../src/Components/Modal.js","../src/Components/Details.js"],"names":["Carousel","Component","active","handleIndexClick","event","setState","target","dataset","index","render","state","images","props","map","photo","bind","ErrorBoundary","hasError","redirect","getDerivedStateFromError","componentDidCatch","error","info","console","setTimeout","children","Modal","modalRoot","document","getElementById","elRef","current","createElement","appendChild","removeChild","Details","loading","showModal","window","location","componentDidMount","res","fetch","match","params","id","json","Object","assign","pets","animal","breed","city","description","name","theme","toggleModal","backgroundColor","adopt","DetailsWithRouter","DetailsWithErrorBoundary"],"mappings":";AAoDeA,aAAAA,OAAAA,eAAAA,QAAAA,aAAAA,CAAAA,OAAAA,IAAAA,QAAAA,aAAAA,EApDf,IAAA,EAAA,QAAA,SAoDeA,EAAAA,QAAAA,qBAAAA,SAAAA,EAAAA,EAAAA,EAAAA,GAAAA,OAAAA,KAAAA,EAAAA,OAAAA,eAAAA,EAAAA,EAAAA,CAAAA,MAAAA,EAAAA,YAAAA,EAAAA,cAAAA,EAAAA,UAAAA,IAAAA,EAAAA,GAAAA,EAAAA,EAlDf,MAAMA,UAAiBC,EAAvB,UAAiC,eAAA,GAAA,SAAA,GACrB,EAAA,KAAA,QAAA,CACJC,OAAQ,IAWZC,iBAAiBC,GACRC,KAAAA,SAAS,CAEVH,QAASE,EAAME,OAAOC,QAAQC,QAItCC,SACU,MAAA,OAAEP,GAAW,KAAKQ,OAClB,OAAEC,GAAW,KAAKC,MAExB,OACI,EAAA,EAAA,MAAA,MAAA,CAAK,UAAU,WAAf,SAAA,EACI,EAAA,EAAA,KAAA,MAAA,CAAK,IAAKD,EAAOT,GAAS,IAAI,YAC9B,EAAA,EAAA,KAAA,MAAA,CAAK,UAAU,mBACVS,SAAAA,EAAOE,IAAI,CAACC,EAAON,KAGhB,EAAA,EAAA,KAAA,MAAA,CAEI,IAAKM,EACON,aAAAA,EACZ,QAAS,KAAKL,iBAAiBY,KAAK,MACpC,UAAWP,IAAUN,EAAS,SAAW,GACzC,IAAI,oBALCY,UAhC3Bd,EAAAA,EAQoB,eAAA,CAClBW,OAAQ,CAAC,mDAyCFX,IAAAA,EAAAA,EAAAA,QAAAA,QAAAA;;ACrBAgB,aAAAA,OAAAA,eAAAA,QAAAA,aAAAA,CAAAA,OAAAA,IAAAA,QAAAA,aAAAA,EA9Bf,IAAA,EAAA,QAAA,SACA,EAAA,QAAA,oBA6BeA,EAAAA,QAAAA,qBAAAA,SAAAA,EAAAA,EAAAA,EAAAA,GAAAA,OAAAA,KAAAA,EAAAA,OAAAA,eAAAA,EAAAA,EAAAA,CAAAA,MAAAA,EAAAA,YAAAA,EAAAA,cAAAA,EAAAA,UAAAA,IAAAA,EAAAA,GAAAA,EAAAA,EA3Bf,MAAMA,UAAsBf,EAA5B,UAAsC,eAAA,GAAA,SAAA,GAC1B,EAAA,KAAA,QAAA,CAAEgB,UAAU,EAAOC,UAAU,IAC9BC,kCACI,MAAA,CAAEF,UAAU,GAEvBG,kBAAkBC,EAAOC,GAErBC,QAAQF,MAAM,gCAAiCA,EAAOC,GAEtDE,WAAW,IAAM,KAAKnB,SAAS,CAAEa,UAAU,IAAS,KAGxDT,SACQ,OAAA,KAAKC,MAAMQ,UACH,EAAA,EAAA,KAAA,EAAD,SAAA,CAAU,GAAG,MACb,KAAKR,MAAMO,UAEd,EAAA,EAAA,MAAA,KAAA,CAAA,SAAA,CAAA,+BACgC,EAAA,EAAA,KAAA,EAAD,KAAA,CAAM,GAAG,IAAT,SAAA,mEAKhC,KAAKL,MAAMa,UAIXT,IAAAA,EAAAA,EAAAA,QAAAA,QAAAA;;ACVAU,aAAAA,OAAAA,eAAAA,QAAAA,aAAAA,CAAAA,OAAAA,IAAAA,QAAAA,aAAAA,EArBf,IAAA,EAAA,QAAA,SACA,EAAA,QAAA,aAoBeA,EAAAA,QAAAA,qBAlBf,IAAIC,EAEJ,MAAMD,EAAQ,EAAGD,SAAAA,MACbE,EAAYA,GAAwBC,SAASC,eAAe,SACtDC,MAAAA,GAAQ,EAAO,EAAA,QAAA,MAWrB,OAVIA,EAAMC,UACND,EAAMC,QAAUH,SAASI,cAAc,SAGjC,EAAA,EAAA,WAAA,KACNL,EAAUM,YAAYH,EAAMC,SACrB,IAAMJ,EAAUO,YAAYJ,EAAMC,UAC1C,KAGI,EAAA,EAAA,eAAa,EAAA,EAAA,KAAA,MAAA,CAAMN,SAAAA,IAAiBK,EAAMC,UAGtCL,IAAAA,EAAAA,EAAAA,QAAAA,QAAAA;;ACmEd,aAAA,OAAA,eAAA,QAAA,aAAA,CAAA,OAAA,IAAA,QAAA,QAAA,EAxFD,IAAA,EAAA,QAAA,SACA,EAAA,QAAA,oBACA,EAAA,EAAA,QAAA,eACA,EAAA,EAAA,QAAA,oBACA,EAAA,EAAA,QAAA,mBACA,EAAA,EAAA,QAAA,YAmFC,EAAA,QAAA,qBAAA,SAAA,EAAA,GAAA,OAAA,GAAA,EAAA,WAAA,EAAA,CAAA,QAAA,GAAA,SAAA,EAAA,EAAA,EAAA,GAAA,OAAA,KAAA,EAAA,OAAA,eAAA,EAAA,EAAA,CAAA,MAAA,EAAA,YAAA,EAAA,cAAA,EAAA,UAAA,IAAA,EAAA,GAAA,EAAA,EAjFD,MAAMS,UAAgBlC,EAAtB,UAAgC,eAAA,GAAA,SAAA,GAEpB,EAAA,KAAA,QAAA,CAAEmC,SAAS,EAAMC,WAAW,IA0BtB,EAAA,KAAA,cAAA,IACV,KAAKhC,SAAS,CAAEgC,WAAY,KAAK3B,MAAM2B,aACnC,EAAA,KAAA,QAAA,IAAOC,OAAOC,SAAW,2BAzB3BC,0BACIC,MAAAA,QAAYC,6CAOyB,KAAK9B,MAAM+B,MAAMC,OAAOC,MAE7DC,QAAaL,EAAIK,OAClBzC,KAAAA,SACD0C,OAAOC,OACH,CACIZ,SAAS,GAGbU,EAAKG,KAAK,KAStBxC,SACQ,GAAA,KAAKC,MAAM0B,QACX,OAAO,EAAA,EAAA,KAAA,KAAA,CAAA,SAAA,YAEL,MAAA,OAAEc,EAAF,MAAUC,EAAV,KAAiBC,EAAjB,MAAuB1C,EAAvB,YAA8B2C,EAA9B,KAA2CC,EAA3C,OAAiD3C,EAAjD,UAAyD0B,GAAc,KAAK3B,MAClF,OACI,EAAA,EAAA,MAAA,MAAA,CAAK,UAAU,UAAf,SAAA,EACK,EAAA,EAAA,KAAA,EAAD,QAAA,CAAU,OAAQC,KAClB,EAAA,EAAA,MAAA,MAAA,CAAA,SAAA,EACI,EAAA,EAAA,KAAA,KAAA,CAAK2C,SAAAA,KACL,EAAA,EAAA,MAAA,KAAA,CAAKJ,SAAAA,CAAAA,EAAWC,MAAAA,EAAUC,MAAAA,EAAQ1C,KAAAA,MACjC,EAAA,EAAA,KAAA,EAAD,QAAc,SAAd,CACK,SAAA,EAAE6C,MACC,EAAA,EAAA,MAAA,SAAA,CACA,QAAS,KAAKC,YACd,MAAO,CAAEC,gBAAiBF,GAAgBD,SAAAA,CAAAA,SAAAA,QAIlD,EAAA,EAAA,KAAA,IAAA,CAAID,SAAAA,IAGAhB,GACK,EAAA,EAAA,KAAA,EAAD,QAAA,CAAA,UACI,EAAA,EAAA,MAAA,MAAA,CAAA,SAAA,EACI,EAAA,EAAA,MAAA,KAAA,CAA6BiB,SAAAA,CAAAA,2BAAAA,EAA7B,QACA,EAAA,EAAA,MAAA,MAAA,CAAK,UAAU,UAAf,SAAA,EACI,EAAA,EAAA,KAAA,SAAA,CAAQ,QAAS,KAAKI,MAAtB,SAAA,SACA,EAAA,EAAA,KAAA,SAAA,CAAQ,QAAS,KAAKF,YAAtB,SAAA,eAIZ,YAU5B,MAAMG,GAAoB,EAAWxB,EAAAA,YAAAA,GAEtB,SAASyB,IACpB,OACK,EAAA,EAAA,KAAA,EAAD,QAAA,CAAA,UACK,EAAA,EAAA,KAAA,EAAD","file":"Details.72c799a9.js","sourceRoot":"../server","sourcesContent":["import { Component } from \"react\";\n\nclass Carousel extends Component {\n    state = {\n        active: 0\n    }\n\n    // If no images, here are some default images\n    // static: defaultProps will be available on parent Carousel and const carousel = new Carousel\n    // ex: carousel.defaultProps will be available\n    static defaultProps = {\n        images: [\"http://pets-images.dev-apis.com/pets/none.jpg\"]\n    };\n\n    // can turn into an arrow function so 'this' keyword is bound to the scope where the function is defined\n    handleIndexClick(event) {\n        this.setState({\n            // comes back as a string from the Dom, so + to make it a number\n            active: +event.target.dataset.index\n        })\n    }\n\n    render() {\n        const { active } = this.state;\n        const { images } = this.props\n\n        return (\n            <div className=\"carousel\">\n                <img src={images[active]} alt=\"animal\" />\n                <div className=\"carousel-smaller\">\n                    {images.map((photo, index) => (\n                        // eslint-disable-next-line\n                        // img should be a button\n                        <img\n                            key={photo}\n                            src={photo}\n                            data-index={index}\n                            onClick={this.handleIndexClick.bind(this)}\n                            className={index === active ? \"active\" : \"\"}\n                            alt=\"animal thumbnail\"\n                        />\n                    ))}\n                </div>\n            </div>\n        )\n    }\n\n\n\n}\n\n\nexport default Carousel;","// mostly took this from the React docs\nimport { Component } from \"react\";\nimport { Link, Redirect } from \"react-router-dom\";\n\nclass ErrorBoundary extends Component {\n    state = { hasError: false, redirect: false };\n    static getDerivedStateFromError() {\n        return { hasError: true }\n    }\n    componentDidCatch(error, info) {\n        // I log this to Sentry, Azure Monitor, New Relic, \n        console.error(\"ErrorBoundary caught an error\", error, info);\n        // Avoid not redirecting on immediate page load errors\n        setTimeout(() => this.setState({ redirect: true }), 5000)\n    }\n\n    render() {\n        if (this.state.redirect) {\n            return <Redirect to=\"/\" />\n        } else if (this.state.hasError) {\n            return (\n                <h2>\n                    This listing has an error. <Link to=\"/\">Click here to go back to the homepage or wait five seconds.</Link>\n                </h2>\n            )\n        }\n        // children is whatevet is passed into <ErrorBoundary></ErrorBoundary>\n        return this.props.children;\n    }\n}\n\nexport default ErrorBoundary;","import { useEffect, useRef } from \"react\";\nimport { createPortal } from \"react-dom\";\n\nlet modalRoot;\n\nconst Modal = ({ children }) => {\n    modalRoot = modalRoot ? modalRoot : document.getElementById('modal');\n    const elRef = useRef(null);\n    if(!elRef.current) {\n        elRef.current = document.createElement('div');\n    }\n\n    useEffect(() => {\n        modalRoot.appendChild(elRef.current);\n        return () => modalRoot.removeChild(elRef.current);\n    }, [])\n\n    // similar to ReactDOM.render to render to the dom\n    return createPortal(<div>{children}</div>, elRef.current);\n}\n\nexport default Modal;","import { Component } from \"react\";\nimport { withRouter } from \"react-router-dom\";\nimport Carousel from \"./Carousel\";\nimport ErrorBoundary from \"./ErrorBoundary\";\nimport ThemeContext from \"./ThemeContext\";\nimport Modal from \"./Modal\";\n\nclass Details extends Component {\n\n    state = { loading: true, showModal: false };\n\n\n    async componentDidMount() {\n        const res = await fetch(\n            // this refers to Details component\n            // prop is passed down from the parent\n            // match and params are coming from react-router in App.js(/details/:id)\n            // match: matched path\n            // params: parameters from the user\n            // id: in /details/:id\n            `http://pets-v2.dev-apis.com/pets?id=${this.props.match.params.id}`\n        )\n        const json = await res.json()\n        this.setState(\n            Object.assign(\n                {\n                    loading: false,\n                },\n                // name, location, description will all be passed in\n                json.pets[0]\n\n            )\n        )\n    }\n\n    toggleModal = () =>\n        this.setState({ showModal: !this.state.showModal });\n    adopt = () => (window.location = \"http://bit.ly/pet-adopt\");\n    render() {\n        if (this.state.loading) {\n            return <h2>loading</h2>\n        }\n        const { animal, breed, city, state, description, name, images, showModal } = this.state;\n        return (\n            <div className=\"details\">\n                <Carousel images={images} />\n                <div>\n                    <h1>{name}</h1>\n                    <h2>{animal} - {breed} - {city}, {state}</h2>\n                    <ThemeContext.Consumer>\n                        {([theme]) => (\n                            <button \n                            onClick={this.toggleModal}\n                            style={{ backgroundColor: theme }}>Adopt {name}</button>\n                        )}\n                    </ThemeContext.Consumer>\n\n                    <p>{description}</p>\n                    \n                    {\n                        showModal ? (\n                            <Modal>\n                                <div>\n                                    <h1>Would you like to adopt {name}?</h1>\n                                    <div className=\"buttons\">\n                                        <button onClick={this.adopt}>Yes</button>\n                                        <button onClick={this.toggleModal}>No</button>\n                                    </div>\n                                </div>\n                            </Modal>\n                        ) : null\n                    }\n                </div>\n            </div>\n        )\n    }\n}\n\n// by default, react router doesn't pass in all its information to Details\n// so wrapping withRouter to Details is going to pass those props in (higher order component)\nconst DetailsWithRouter = withRouter(Details)\n\nexport default function DetailsWithErrorBoundary() {\n    return (\n        <ErrorBoundary>\n            <DetailsWithRouter />\n        </ErrorBoundary>\n    )\n}"]}